{"remainingRequest":"/Users/cindice/Documents/github/Zeepin-TS-Sdk/node_modules/babel-loader/lib/index.js!/Users/cindice/Documents/github/Zeepin-TS-Sdk/node_modules/ts-loader/index.js??ref--13-2!/Users/cindice/Documents/github/Zeepin-TS-Sdk/packages/sdk/wallet/wallet.ts","dependencies":[{"path":"/Users/cindice/Documents/github/Zeepin-TS-Sdk/packages/sdk/wallet/wallet.ts","mtime":1556783635000},{"path":"/Users/cindice/Documents/github/Zeepin-TS-Sdk/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/cindice/Documents/github/Zeepin-TS-Sdk/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/cindice/Documents/github/Zeepin-TS-Sdk/node_modules/ts-loader/index.js","mtime":1545640398000}],"contextDependencies":[],"result":["import \"core-js/modules/es6.function.name\";\nimport \"core-js/modules/es6.array.map\";\nimport _JSON$stringify from \"/Users/cindice/Documents/github/Zeepin-TS-Sdk/node_modules/@babel/runtime-corejs2/core-js/json/stringify\";\nimport _getIterator from \"/Users/cindice/Documents/github/Zeepin-TS-Sdk/node_modules/@babel/runtime-corejs2/core-js/get-iterator\";\nimport _classCallCheck from \"/Users/cindice/Documents/github/Zeepin-TS-Sdk/node_modules/@babel/runtime-corejs2/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/cindice/Documents/github/Zeepin-TS-Sdk/node_modules/@babel/runtime-corejs2/helpers/esm/createClass\";\nimport { DEFAULT_SCRYPT } from \"../common/consts\";\nimport { Account } from \"./account\";\nexport var Wallet =\n/*#__PURE__*/\nfunction () {\n  function Wallet() {\n    _classCallCheck(this, Wallet);\n\n    this.name = 'com.github.zeepin';\n    this.version = '1.0';\n    this.scrypt = {\n      dkLen: DEFAULT_SCRYPT.size,\n      n: DEFAULT_SCRYPT.cost,\n      p: DEFAULT_SCRYPT.parallel,\n      r: DEFAULT_SCRYPT.blockSize\n    };\n  }\n  /**\n   * create wallet\n   */\n\n\n  _createClass(Wallet, [{\n    key: \"addAccount\",\n    value: function addAccount(account) {\n      var _iteratorNormalCompletion = true;\n      var _didIteratorError = false;\n      var _iteratorError = undefined;\n\n      try {\n        for (var _iterator = _getIterator(this.accounts), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {\n          var ac = _step.value;\n\n          if (ac.address.toBase58() === account.address.toBase58()) {\n            return;\n          }\n        }\n      } catch (err) {\n        _didIteratorError = true;\n        _iteratorError = err;\n      } finally {\n        try {\n          if (!_iteratorNormalCompletion && _iterator.return != null) {\n            _iterator.return();\n          }\n        } finally {\n          if (_didIteratorError) {\n            throw _iteratorError;\n          }\n        }\n      }\n\n      this.accounts.push(account);\n    }\n  }, {\n    key: \"setDefaultAccount\",\n    value: function setDefaultAccount(address) {\n      this.defaultAccountAddress = address;\n    }\n    /**\n     * keystore\n     */\n\n  }, {\n    key: \"toJson\",\n    value: function toJson() {\n      return _JSON$stringify(this.toJsonObj());\n    }\n  }, {\n    key: \"toJsonObj\",\n    value: function toJsonObj() {\n      var obj = {\n        accounts: this.accounts.map(function (a) {\n          return a.toJsonObj();\n        }),\n        defaultAccountAddress: this.defaultAccountAddress,\n        name: this.name,\n        scrypt: this.scrypt,\n        version: this.version\n      };\n      return obj;\n    }\n  }], [{\n    key: \"createWallet\",\n    value: function createWallet(password, name) {\n      var wallet = new Wallet();\n      wallet.accounts = [];\n      wallet.accounts.push(Account.createAccount(password, name));\n      wallet.defaultAccountAddress = wallet.accounts[0].address.toBase58();\n      return wallet;\n    }\n    /**\n     * import wallet\n     */\n\n  }, {\n    key: \"importWalletByPrivateKey\",\n    value: function importWalletByPrivateKey(password, privateKey, name) {\n      var wallet = new Wallet();\n      wallet.accounts = [];\n      wallet.accounts.push(Account.importAccountByPrivateKey(password, privateKey, name));\n      wallet.defaultAccountAddress = wallet.accounts[0].address.toBase58();\n      return wallet;\n    }\n  }, {\n    key: \"importWalletByKeystore\",\n    value: function importWalletByKeystore(password, keystore) {\n      var wallet = new Wallet(); // @ts-ignore\n\n      wallet.defaultAccountAddress = keystore.accounts[0].address;\n      wallet.accounts = [];\n      wallet.accounts.push(Account.importAccountByKeystore(password, keystore)); // @ts-ignore\n\n      wallet.scrypt.n = keystore.scrypt.n;\n      return wallet;\n    }\n  }, {\n    key: \"modifyPassword\",\n    value: function modifyPassword(oldPassword, newPassword, keystore) {\n      var wallet = new Wallet(); // @ts-ignore\n\n      wallet.defaultAccountAddress = keystore.accounts[0].address;\n      wallet.accounts = [];\n      wallet.accounts.push(Account.modifyPassword(oldPassword, newPassword, keystore));\n      return wallet;\n    }\n  }]);\n\n  return Wallet;\n}();",{"version":3,"sources":["/Users/cindice/Documents/github/Zeepin-TS-Sdk/packages/sdk/wallet/wallet.ts"],"names":[],"mappings":"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","sourcesContent":["import { DEFAULT_SCRYPT } from \"../common/consts\";\nimport { Account } from \"./account\";\n\nexport class Wallet {\n    name: string = 'com.github.zeepin';\n    version: string = '1.0';\n    scrypt = {\n        dkLen: DEFAULT_SCRYPT.size,\n        n: DEFAULT_SCRYPT.cost,\n        p: DEFAULT_SCRYPT.parallel,\n        r: DEFAULT_SCRYPT.blockSize\n    };\n    defaultAccountAddress: string;\n    accounts: Account[];\n\n\n    /**\n     * create wallet\n     */\n    static createWallet(password: string, name?: string): Wallet {\n        const wallet = new Wallet();\n        wallet.accounts = [];\n        wallet.accounts.push(Account.createAccount(password, name));\n        wallet.defaultAccountAddress = wallet.accounts[0].address.toBase58();\n        return wallet;\n    }\n\n    /**\n     * import wallet\n     */\n    static importWalletByPrivateKey(password: string, privateKey: string, name?: string): Wallet {\n        const wallet = new Wallet();\n        wallet.accounts = [];\n        wallet.accounts.push(Account.importAccountByPrivateKey(password, privateKey, name));\n        wallet.defaultAccountAddress = wallet.accounts[0].address.toBase58();\n        return wallet;\n    }\n\n    static importWalletByKeystore(password: string, keystore: object): Wallet {\n        const wallet = new Wallet();\n\t\t// @ts-ignore\n        wallet.defaultAccountAddress = keystore.accounts[0].address;\n        wallet.accounts = [];\n        wallet.accounts.push(Account.importAccountByKeystore(password, keystore));\n        // @ts-ignore\n        wallet.scrypt.n = keystore.scrypt.n;\n        return wallet;\n    }\n\n    static modifyPassword(oldPassword: string, newPassword: string, keystore: object): Wallet {\n        const wallet = new Wallet();\n\t\t// @ts-ignore\n        wallet.defaultAccountAddress = keystore.accounts[0].address;\n        wallet.accounts = [];\n        wallet.accounts.push(Account.modifyPassword(oldPassword, newPassword, keystore));\n        return wallet;\n    }\n\n    addAccount(account: Account): void {\n        for (const ac of this.accounts) {\n            if (ac.address.toBase58() === account.address.toBase58()) {\n                return;\n            }\n        }\n        this.accounts.push(account);\n    }\n\n    setDefaultAccount(address: string): void {\n        this.defaultAccountAddress = address;\n    }\n\n    /**\n     * keystore\n     */\n    toJson(): string {\n        return JSON.stringify(this.toJsonObj());\n    }\n\n    toJsonObj(): any {\n        const obj = {\n            accounts: this.accounts.map((a) => a.toJsonObj()),\n            defaultAccountAddress: this.defaultAccountAddress,\n            name: this.name,\n            scrypt: this.scrypt,\n            version: this.version\n        };\n        return obj;\n    }\n}\n"],"sourceRoot":""}]}